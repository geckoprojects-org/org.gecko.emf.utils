-plugin.junit5: \
	aQute.bnd.repository.maven.pom.provider.BndPomRepository;\
		releaseUrl			= "https://repo.maven.apache.org/maven2/"; \
		snapshotUrl			= "https://oss.sonatype.org/content/repositories/snapshots/";\
		name				= "OSGi-Tests-JUnit5 Dependencies";\
		revision			= "${dependencies.junit5.all}";\
		poll.time           = -1;\
		transitive			= false

Test-Cases: ${classes;HIERARCHY_INDIRECTLY_ANNOTATED;org.junit.platform.commons.annotation.Testable;CONCRETE}

jupiter.version: 5.8.2
platform.version: 1.8.2
osgi.test.version: 1.1.0
mockito.version: 4.4.0
assertj.version: 3.22.0
bytebuddy.version: 1.12.8

-buildpath.junit5: ${if;${-enable-junit5};${test.buildpath}}
-tester: biz.aQute.tester.junit-platform
-runproperties.junit5: ${if;${-enable-junit5};${test.runproperties}}
-runrequires.junit5: ${if;${-enable-junit5};${test.runbundles}}

#Adds the related project to the buildpath 
-buildpath.test_host: ${if;${-enable-junit5};${replace;${p};.tests}}

#Makes the TestBundle to a Fragment
Fragment-Host: ${if;${-enable-junit5};${replace;${p};.tests}}

-enable-junit5: false
-run-junit5: false

test.buildpath: \
	assertj-core,\
	junit-jupiter-api,\
	junit-platform-commons,\
	org.mockito.mockito-core,\
	org.apiguardian.api,\
	org.osgi.test.assertj.framework,\
	org.osgi.test.assertj.promise,\
	org.osgi.test.common,\
	org.osgi.test.junit5,\
	org.osgi.test.junit5.cm
	

test.runproperties: \
	tester.trace=true,\
	tester.continuous=true

test.runbundles: \
	biz.aQute.tester.junit-platform;version=latest,\
	org.opentest4j;version='[1.2.0,1.2.1)',\
	junit-jupiter-api;version='[5.7.0,6)',\
	junit-jupiter-params;version='[5.7.0,6)',\
	junit-jupiter-engine;version='[5.7.0,6)',\
	junit-platform-commons;version='[1.7.0,2)',\
	junit-platform-engine;version='[1.7.0,2)',\
	junit-platform-launcher;version='[1.7.0,2)'  


dependencies.junit5.all: \
	${dependencies.assertj},\
	${dependencies.junit5},\
	${dependencies.mockito},\
	${dependencies.osgi.test},\
	org.objenesis:objenesis:3.2,\
	biz.aQute.bnd:biz.aQute.tester.junit-platform:6.2.0

# This is the version of OSGI-Test that will be used at build time and runtime
dependencies.osgi.test: \
	org.osgi:org.osgi.test.junit5:${osgi.test.version},\
	org.osgi:org.osgi.test.junit5.cm:${osgi.test.version},\
	org.osgi:org.osgi.test.common:${osgi.test.version},\
	org.osgi:org.osgi.test.assertj.framework:${osgi.test.version},\
	org.osgi:org.osgi.test.assertj.promise:${osgi.test.version}

# This is the version of JUnit that will be used at build time and runtime
dependencies.junit5: \
	org.junit.jupiter:junit-jupiter-api:${jupiter.version},\
	org.junit.jupiter:junit-jupiter-engine:${jupiter.version},\
	org.junit.jupiter:junit-jupiter-params:${jupiter.version},\
	org.junit.platform:junit-platform-runner:${platform.version},\
	org.junit.platform:junit-platform-commons:${platform.version},\
	org.junit.platform:junit-platform-launcher:${platform.version},\
	org.junit.platform:junit-platform-engine:${platform.version},\
	org.junit.platform:junit-platform-testkit:${platform.version}

# This is the version of Mockito that will be used at build time and run time
dependencies.mockito: \
	org.mockito:mockito-core:${mockito.version},\
	org.mockito:mockito-junit-jupiter:${mockito.version}
	
dependencies.assertj: \
	org.assertj:assertj-core:${assertj.version},\
	net.bytebuddy:byte-buddy:${bytebuddy.version},\
	net.bytebuddy:byte-buddy-agent:${bytebuddy.version},\
	org.opentest4j:opentest4j:1.2.0,\
	org.apiguardian:apiguardian-api:1.1.2,\
	org.hamcrest:hamcrest:2.2
